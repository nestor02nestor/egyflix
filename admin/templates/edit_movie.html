{% extends "dashboard.html" %}
{% block content %}
<div class="content-form">
    <h2>تعديل فيلم</h2>
    <form action="{{ url_for('edit_movie', movie_id=movie.id) }}" method="post" enctype="multipart/form-data">
        <div class="form-group">
            <label for="title">عنوان الفيلم</label>
            <input type="text" id="title" name="title" value="{{ movie.title }}" required>
        </div>

        <div class="form-group">
            <label for="description">وصف الفيلم</label>
            <textarea id="description" name="description" rows="4" required>{{ movie.description }}</textarea>
        </div>

        <div class="form-group">
            <label for="year">سنة الإصدار</label>
            <input type="number" id="year" name="year" value="{{ movie.year }}" required>
        </div>

        <div class="form-group">
            <label for="duration">المدة</label>
            <input type="text" id="duration" name="duration" value="{{ movie.duration }}" required>
        </div>

        <div class="form-group">
            <label for="quality">الجودة</label>
            <select id="quality" name="quality" required>
                <option value="1080p" {% if movie.quality == '1080p' %}selected{% endif %}>1080p</option>
                <option value="720p" {% if movie.quality == '720p' %}selected{% endif %}>720p</option>
                <option value="480p" {% if movie.quality == '480p' %}selected{% endif %}>480p</option>
                <option value="360p" {% if movie.quality == '360p' %}selected{% endif %}>360p</option>
            </select>
        </div>

        <div class="form-group">
            <label for="rating">التقييم</label>
            <input type="number" id="rating" name="rating" min="0" max="10" step="0.1" value="{{ movie.rating }}" required>
        </div>

        <div class="form-group">
            <label for="genre">النوع</label>
            <input type="text" id="genre" name="genre" value="{{ movie.genre }}" required>
        </div>

        <div class="form-group">
            <label for="image">صورة الفيلم</label>
            <input type="file" id="image" name="image" accept="image/*">
            {% if movie.image %}
            <div class="current-image">
                <img src="{{ movie.image }}" alt="Current movie image" style="max-width: 200px;">
                <p>الصورة الحالية</p>
            </div>
            {% endif %}
        </div>

        <div class="form-group">
            <label for="video_url">رابط الفيديو</label>
            <input type="url" id="video_url" name="video_url" value="{{ movie.video_url }}" required>
            <small>يمكنك إضافة رابط من YouTube أو Dailymotion أو رابط مباشر للفيديو</small>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn-primary">حفظ التغييرات</button>
            <a href="{{ url_for('dashboard') }}" class="btn btn-secondary">إلغاء</a>
        </div>
    </form>
</div>

<style>
.content-form {
    background: #1f1f1f;
    padding: 2rem;
    border-radius: 8px;
    max-width: 800px;
    margin: 2rem auto;
}

.content-form h2 {
    color: #fff;
    margin-bottom: 2rem;
    text-align: center;
}

.form-group {
    margin-bottom: 1.5rem;
}

.form-group label {
    display: block;
    color: #fff;
    margin-bottom: 0.5rem;
    font-weight: 500;
}

.form-group input,
.form-group textarea,
.form-group select {
    width: 100%;
    padding: 0.8rem;
    border: 1px solid #333;
    border-radius: 4px;
    background: #2a2a2a;
    color: #fff;
    font-size: 1rem;
}

.form-group input[type="file"] {
    padding: 0.5rem;
    background: transparent;
    border: none;
}

.form-group small {
    display: block;
    color: #aaa;
    margin-top: 0.5rem;
    font-size: 0.9rem;
}

.current-image {
    margin-top: 1rem;
    text-align: center;
}

.current-image img {
    border-radius: 4px;
    margin-bottom: 0.5rem;
}

.current-image p {
    color: #aaa;
    font-size: 0.9rem;
}

.form-actions {
    display: flex;
    gap: 1rem;
    justify-content: flex-end;
    margin-top: 2rem;
}

.btn {
    padding: 0.8rem 1.5rem;
    border: none;
    border-radius: 4px;
    font-size: 1rem;
    cursor: pointer;
    transition: background-color 0.3s;
}

.btn-primary {
    background: #e50914;
    color: #fff;
}

.btn-primary:hover {
    background: #ff0a16;
}

.btn-secondary {
    background: #333;
    color: #fff;
    text-decoration: none;
}

.btn-secondary:hover {
    background: #444;
}

@media (max-width: 768px) {
    .content-form {
        margin: 1rem;
        padding: 1rem;
    }

    .form-actions {
        flex-direction: column;
    }

    .btn {
        width: 100%;
        text-align: center;
    }
}
</style>
{% endblock %}
